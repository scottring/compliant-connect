# System Architecture and Patterns

## Authentication Flow
- Supabase Auth integration
- Protected route middleware
- Role-based access control
- Session management with Supabase client

## Form Management
- Zod schema validation
- Multi-step form pattern
- Form state management with React Hook Form
- Client-side validation with immediate feedback

## Component Architecture
### Unified Onboarding
- Container/Presenter pattern
- Step-based form progression
- Centralized state management
- Error boundary implementation

### Form Components
- Reusable form fields
- Validation integration
- Loading state handling
- Error message display

## State Management
- React Context for global state
- Local state for form data
- Supabase real-time subscriptions
- Optimistic updates

## Data Flow
- Server-side validation
- Client-side caching
- Real-time updates
- Error handling middleware

## UI/UX Patterns
- Progressive disclosure
- Immediate feedback
- Loading indicators
- Toast notifications
- Responsive design

## Security Patterns
- Row Level Security (RLS)
- Input sanitization
- CSRF protection
- Rate limiting

## Testing Strategy
- Unit tests for components
- Integration tests for flows
- E2E tests for critical paths
- Test data management

## Error Handling
- Global error boundary
- Form-level error handling
- API error handling
- User feedback system

## Performance Patterns
- Code splitting
- Lazy loading
- Caching strategies
- Optimistic updates

## Deployment Strategy
- CI/CD pipeline
- Environment configuration
- Database migrations
- Backup procedures 